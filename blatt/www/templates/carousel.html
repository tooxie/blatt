{% with count = len(article.media) %}
    {% if count == 1 %}
        <p class="main-img">
            {% for media in article.media %}
                <a href="{{ media.url }}" class="media">
                    <img src="{{ media.url }}" alt="{{ media|get_caption }}" title="{{ media|get_caption }}">
                </a>
            {% endfor %}
        </p>
    {% endif %}

    {% if count > 1 %}
        <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
            <!-- Indicators -->
            <ol class="carousel-indicators">
                {% for image in article.media %}
                    <li data-target="#carousel-example-generic" data-slide-to="{{ loop.index - 1 }}"{% if loop.index == 1 %} class="active" {% endif %}></li>
                {% endfor %}
            </ol>

            <!-- Wrapper for slides -->
            <div class="carousel-inner">
                {% for image in article.media %}
                    <div class="item{% if loop.index == 1 %} active{% endif %}">
                        <div class="inner-item">
                            <img src="{{ image.url }}" alt="{{ image|get_caption }}">
                            <div class="carousel-caption">
                                {{ image|get_caption }}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>

            <!-- Controls -->
            <a class="left carousel-control" href="#carousel-example-generic" data-slide="prev"><span class="glyphicon glyphicon-chevron-left"></span></a>
            <a class="right carousel-control" href="#carousel-example-generic" data-slide="next"><span class="glyphicon glyphicon-chevron-right"></span></a>
        </div>
    {% endif %}
{% endwith %}
